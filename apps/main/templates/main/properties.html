<style>
.property-wrapper {
	border: 1px solid silver;
	border-radius: 2em;
	padding: 0;
	margin: 1em 0em;
	text-align: center;
}
.btn-circle-nav {
  width: 30px;
  height: 30px;
  margin: 5px;
  text-align: center;
  padding: 6px 0;
  font-size: 12px;
  line-height: 1.428571429;
  border-radius: 15px;
}
.btn-circle {
  width: 8em;
  height: 8em;
  margin: 20px auto;
  text-align: center;
  padding: 6px 0;
  font-size: 1em;
  line-height: 1.42;
  border-radius: 4em;
}
.property-name, .add-property{
	border-top: 1px solid silver;
}
#search{
	margin-bottom: 1em;
}
h2 {
	text-align: center;
}
h4 {
	color: #305D72;
}
</style>
<script>
	$(document).ready(function(){
		$('#search').keyup(function(){
			var searchTerm = $('#search').val();
			$(`.property-name:not(:Contains("${searchTerm}"))`).parent().parent().fadeOut("slow");
			$(`.property-name:Contains("${searchTerm}")`).parent().parent().fadeIn("slow");
		});

		$(".property-name").parent().click(function(){
			window.location.hash = `/property/${$(this).attr("data-id")}/events`;
			// $.ajax({
			// 	url: `/property/${$(this).attr("data-id")}/events`,
			// 	method: "get",
			// 	success: function(serverResponse) {
			// 		$('#main-dashboard').html(serverResponse);
			// 	}
			// });
		});

		$(".add-property").parent().click(function(){
			window.location.hash = '/add_property';
			// $.ajax({
			// 	url: "/add_property",
			// 	method: "get",
			// 	success: function(serverResponse) {
			// 		$('#main-dashboard').html(serverResponse);
			// 	}
			// });
		});
	});

	$.expr[':'].Contains = function(a,i,m){
		return jQuery(a).text().toUpperCase().indexOf(m[3].toUpperCase())>=0;
	};
</script>

<h2 class="row">Properties</h2>

<div class="row">
	<div class="col-xs-12 col-sm-8 col-sm-offset-2 col-md-6 col-md-offset-3">
		<input type="text" id="search" class="form-control " placeholder="Search properties by name...">
	</div>
</div>
<div id="properties-interface" class="row">
	{% for property in properties %}
	<div class="col-xs-6 col-sm-4 col-md-3 col-lg-2">
		<div class="property-wrapper" data-id="{{property.id}}">
			<button class="btn btn-lg btn-default btn-circle"><i class="fa fa-{{ property.icon_type.name }} fa-5x" style="color: {{ property.icon_color.color }}"></i></button>
			<div class="property-name" ><h4>{{ property.name }}</h4></div>
		</div>
	</div>
	{% endfor %}

	<div class="col-xs-6 col-sm-4 col-md-3 col-lg-2">
		<div class="property-wrapper">
			<button class="btn btn-lg btn-info btn-circle btn-add"><i class="fa fa-plus fa-5x" style="color: grey"></i></button>
			<div class="add-property"><h4>Add Property</h4></div>
		</div>
	</div>
</div>
