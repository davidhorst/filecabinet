<div class='container'>
    <div class="col-md-6 col-md-offset-3 col-sm-8 col-sm-offset-2 col-xs-10 col-xs-offset-1" id='event_header'>
        <a id='prop_link'>Property Name</a>
        <h3>{{event.name}}</h3>
        <p>{{event.comment }}</p>
        <p>{{event.created_at}}</p>
    </div>

    <div id='event_mid_content' class='class="col-md-6 col-md-offset-3 col-sm-8 col-sm-offset-2 col-xs-10 col-xs-offset-1"'>



        <button class="btn btn-default glyphicon-plus inline col-md-6 col-md-offset-3 col-sm-8 col-sm-offset-2 col-xs-10 col-xs-offset-1" id="add_event" role="button"> Add Note </button>

        <button class="btn btn-default glyphicon-plus inline col-md-6 col-md-offset-3 col-sm-8 col-sm-offset-2 col-xs-10 col-xs-offset-1" id="add_alert" role="button"> Add Alert </button>
    </div>

    <div class="col-md-6 col-md-offset-3 col-sm-8 col-sm-offset-2 col-xs-10 col-xs-offset-1">
        <input type="text" id='search' class="form-control" placeholder="Search">
    </div>

    <h3>Notes:</h3>
    <table class="col-md-6 col-md-offset-3 col-sm-8 col-sm-offset-2 col-xs-10 col-xs-offset-1 table table-hover" id="note_table">
        {% for note in notes %}
        <tr data_id='{{note.id}}'>
            <td><p class='note_name'>{{ note.name }}</p></td>
        </tr>
        {% endfor %}
    </table>

<h3>Alerts:</h3>
    <table class="col-md-6 col-md-offset-3 col-sm-8 col-sm-offset-2 col-xs-10 col-xs-offset-1 table table-hover" id="alert_table">

        {% for alert in alerts %}
        <tr data_id='{{alert.id}}'>
            <td><p class='alert_name'>{{ alert.comment }}</p></td>
        </tr>
        {% endfor %}

    </table>
</div>

<style>

    #event_header, #event_mid_content{
        margin-bottom: 40px;
        display: inline-block;
    }

    .inline{
        display: inline-block;
    }

    .search{
        margin-bottom: 20px;
    }
</style>

<script type="text/javascript">
$(document).ready(function() {


    $('#search').keyup(function(){
      var searchTerm = $('#search').val();
      $(`.alert_name:not(:Contains("${searchTerm}"))`).parent().parent().fadeOut("slow");
      $(`.alert_name:Contains("${searchTerm}")`).parent().parent().fadeIn("slow");
      $(`.note_name:not(:Contains("${searchTerm}"))`).parent().parent().fadeOut("slow");
      $(`.note_name:Contains("${searchTerm}")`).parent().parent().fadeIn("slow");
  });


$('#note_table tr').click(function() {
    window.location.hash = '/property/{{prop_id}}/event/{{event.id}}/note/'+$(this).attr("data_id")

});

$('#alert_table tr').click(function() {
    window.location.hash = '/property/{{prop_id}}/event/{{event.id}}/alert/'+$(this).attr("data_id")

});


    $('#add_event').click(function(){
        window.location.hash = "/property/{{prop_id}}/event/{{event.id}}/addNote";
    });

    $('#add_alert').click(function(){
        window.location.hash = "/property/{{prop_id}}/event/{{event.id}}/addAlert";
    });



    $('#prop_link').click(function(){
        window.location.hash = '/property/'+{{prop_id}}+'/events'
    });


});

$.expr[':'].Contains = function(a,i,m){
    	return jQuery(a).text().toUpperCase().indexOf(m[3].toUpperCase())>=0;
 	};



</script>
