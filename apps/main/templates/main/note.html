<div class='container'>
    <div id='header form-control'>
        <h3>Name:</h3>
        <p>{{ note.name }}</p>
        <br>
        <br>
        <p>Description:</p>
        <p>{{ note.comment }}
    </div>

    {% if documents %}
            <ul>
                {% for document in documents %}
                    <li><a href="{{ document.docfile.url }}">{{ document.docfile.name }}</a></li>
                {% endfor %}
            </ul>
        {% else %}
            <p>No documents.</p>
        {% endif %}

        <form id='theForm' method="post" enctype="multipart/form-data">
            {% csrf_token %}
            <p>{{ form.non_field_errors }}</p>
            <input type='hidden' value='{{note.id}}' name='note_id'/>
            <p>{{ form.docfile.label_tag }} {{ form.docfile.help_text }}</p>

            <p>
                {{ form.docfile.errors }}
                {{ form.docfile }}

            </p>

            <input type="submit" value="Upload">
        </form>

</div>

<style>

    ul{
        columns: 2;
        list-style: none;
    }
    #header{
        margin-bottom: 40px;
    }

    .inline{
        display: inline-block;
    }

    #search{
        margin-bottom: 20px;
    }
</style>

<script type="text/javascript">
$(document).ready(function() {

    $('#theForm').submit(function(e){
  	  e.preventDefault();
  	  var csrftoken = getCookie('csrftoken');

  	  $.ajax({
  		  beforeSend: function(xhr, settings) {
  			  if (!csrfSafeMethod(settings.type) && !this.crossDomain) {
  				  xhr.setRequestHeader("X-CSRFToken", csrftoken);
  			  }
  		  },
  		url: 'property/'+{{prop_id}}+'/event/'+{{event_id}}+'/note/'+{{note_id}}+'/add_file',
  		method: "post",
  		data: new FormData($("#theForm").get(0)),
        cache: false,
        processData: false,
        contentType: false,
        success: function(data) {
            alert('success');
        },
        error: function(serverResponse) {
  		  $('#main-dashboard').html(serverResponse.responseText);
  		}
  	  });
  });

});

$.expr[':'].Contains = function(a,i,m){
    	return jQuery(a).text().toUpperCase().indexOf(m[3].toUpperCase())>=0;
 	};



</script>
